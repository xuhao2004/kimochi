<!--pages/settings/index.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view wx:if="{{isLoggedIn}}" class="user-section card">
    <view class="card-body">
      <view class="user-info">
        <view class="user-avatar">
          <text class="avatar-icon">ğŸ‘¤</text>
        </view>
        <view class="user-details">
          <view class="user-name">å·²ç™»å½•ç”¨æˆ·</view>
          <view class="user-desc">ç®¡ç†æ‚¨çš„åº”ç”¨è®¾ç½®</view>
        </view>
      </view>
    </view>
  </view>

  <!-- åŸºç¡€è®¾ç½® -->
  <view class="settings-section">
    <view class="section-header">
      <text class="section-title">åŸºç¡€è®¾ç½®</text>
    </view>
    
    <view class="settings-list">
      <view 
        wx:for="{{settings}}" 
        wx:key="id"
        class="setting-item card card-hover"
        data-setting="{{item}}"
        bindtap="{{item.type === 'switch' ? '' : 'onSettingTap'}}"
      >
        <view class="card-body">
          <view class="setting-content">
            <view class="setting-icon">{{item.icon}}</view>
            <view class="setting-info">
              <view class="setting-title">{{item.title}}</view>
              <view class="setting-desc">{{item.desc}}</view>
              <view wx:if="{{item.value && item.type !== 'switch'}}" class="setting-value">
                {{item.value}}
              </view>
            </view>
            <view class="setting-action">
              <switch 
                wx:if="{{item.type === 'switch'}}"
                checked="{{item.value}}"
                data-setting="{{item}}"
                bindchange="onSwitchChange"
              />
              <text wx:elif="{{item.type === 'arrow'}}" class="arrow">â€º</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- è°ƒè¯•è®¾ç½® (ä»…è°ƒè¯•æ¨¡å¼æ˜¾ç¤º) -->
  <view wx:if="{{showDebugMode}}" class="debug-section">
    <view class="section-header">
      <text class="section-title debug-title">ğŸ”§ è°ƒè¯•æ¨¡å¼</text>
    </view>
    
    <view class="settings-list">
      <view 
        wx:for="{{debugSettings}}" 
        wx:key="id"
        class="setting-item card card-hover {{item.dangerous ? 'dangerous' : ''}}"
        data-setting="{{item}}"
        bindtap="onDebugSettingTap"
      >
        <view class="card-body">
          <view class="setting-content">
            <view class="setting-icon">{{item.icon}}</view>
            <view class="setting-info">
              <view class="setting-title">{{item.title}}</view>
              <view class="setting-desc">{{item.desc}}</view>
            </view>
            <view class="setting-action">
              <text class="arrow">â€º</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-section">
    <view class="version-info" bindlongpress="onVersionLongPress">
      <text class="version-text">kimochiå¿ƒæ™´ v{{version}}</text>
      <text class="version-desc">é•¿æŒ‰å¼€å¯è°ƒè¯•æ¨¡å¼</text>
    </view>
  </view>

  <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
  <view class="safe-area"></view>
</view>