<!--index.wxml-->
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="apple-page">
    <view class="frost-bar">
      <view style="font-size:34rpx;font-weight:700;" bindlongpress="goDevSettings">kimochi心晴</view>
      <view style="font-size:24rpx;color:#666;">关照情绪，连接彼此</view>
      <view style="display:flex; gap:10rpx; margin-top:10rpx;">
        <view class="pill-muted pill">今日未读：{{unread>99?'99+':unread}}</view>
        <view class="pill pill-primary" bindtap="goDaily">今日心语</view>
      </view>
    </view>
    <view style="height:20rpx"/>
    <view class="grid">
      <view class="feature-card fade-in" bindtap="goProfile">
        <view class="feature-icon">👤</view>
        <view class="feature-title">个人资料</view>
        <view class="feature-desc">查看与编辑账号信息、绑定微信与手机号</view>
      </view>
      <view class="feature-card fade-in" bindtap="locateAndFetchWeather">
        <view class="feature-icon">📍</view>
        <view class="feature-title">我的天气</view>
        <view class="feature-desc">获取当前位置天气（需要授权定位）</view>
      </view>
      <view class="feature-card fade-in" bindtap="goDaily">
        <view class="feature-icon">🌤️</view>
        <view class="feature-title">每日心语</view>
        <view class="feature-desc">生成专属心语，支持收藏与分享海报</view>
      </view>
      <view class="feature-card fade-in" bindtap="goWall">
        <view class="feature-icon">🧱</view>
        <view class="feature-title">心情墙</view>
        <view class="feature-desc">发布心情、图片与标签，支持点赞与分组可见</view>
      </view>
      <view class="feature-card fade-in" bindtap="goMessages">
        <view class="feature-icon">🔔</view>
        <view class="feature-title">消息中心</view>
        <view class="feature-desc">系统通知与站内消息，批量删除与置顶</view>
      </view>
      <view class="feature-card fade-in" bindtap="goConfirm">
        <view class="feature-icon">🔑</view>
        <view class="feature-title">确认登录</view>
        <view class="feature-desc">PC 扫码确认，跨端快捷登录</view>
      </view>
      <view class="feature-card fade-in" bindtap="goPrivacy">
        <view class="feature-icon">📜</view>
        <view class="feature-title">隐私政策</view>
        <view class="feature-desc">合规透明，数据保护可控</view>
      </view>
    </view>
    <view style="height:20rpx"/>
    <view class="apple-card" style="background:linear-gradient(135deg,#ffffff,#f7f8fa);margin-top:12rpx;">
      <view class="apple-title">今日心语预览</view>
      <view class="apple-p apple-muted" wx:if="{{!dailyPreview}}">暂无，点击下方生成</view>
      <view class="apple-p" wx:if="{{dailyPreview}}" style="margin-top:8rpx;">{{dailyPreview}}</view>
      <view style="display:flex; gap:12rpx; margin-top:12rpx;">
        <button class="apple-button apple-button-primary" bindtap="goDaily">查看心语</button>
      </view>
    </view>
    <view class="apple-card" style="margin-top:12rpx;" wx:if="{{weather}}">
      <view class="apple-title">当前位置天气</view>
      <view class="apple-p">{{weather.locationName}} · {{weather.summary}} · {{weather.temperatureC}}°C</view>
    </view>
    <view class="apple-card" style="margin-top:12rpx;">
      <view class="apple-title">热帖预览</view>
      <view wx:if="{{!hotPosts.length}}" class="apple-p apple-muted">暂无内容</view>
      <block wx:for="{{hotPosts}}" wx:key="id">
        <view class="apple-card fade-in" style="margin-top:10rpx;">
          <view class="apple-h2">{{item.title}}</view>
          <view class="apple-p">{{item._content}}</view>
          <view class="apple-p apple-muted" style="margin-top:6rpx;">{{item._createdAt}} · {{item.likeCount||0}} 赞</view>
        </view>
      </block>
      <view style="display:flex; gap:12rpx; margin-top:12rpx;">
        <button class="apple-button apple-button-primary" bindtap="goWall">查看更多</button>
      </view>
    </view>
    <view style="margin-top:24rpx;">
      <button class="apple-button apple-button-primary" bindtap="goScan">扫一扫扫码登录/绑定</button>
    </view>
  </view>
</scroll-view>
